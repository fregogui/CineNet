<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>CineNet</title>
  <style>
  #myProgress {
    width: 100%;
    background-color: #ddd;
  }

  #myBar {
    width: 0%;
    height: 30px;
    background-color: #4CAF50;
    text-align: center;
  }
  </style>
</head>

<body>
  <h1>Collect Data</h1>

  <div id="myProgress">
    <div id="myBar">0%</div>
  </div>

  <br>

  <form action="/collect" method="post">
    <input type="submit" value="Collect Data" />
  </form>

  </section>

  <script src="/socket.io/socket.io.js"></script>
  <script>
  var socket = io.connect('http://localhost:3101');
  var elem = document.getElementById("myBar");
  var width = 0;

  socket.on('tx', data => {
    var progress = (Number(data.key) + 1)/Number(data.total) * 100 + '%';
    elem.style.width = progress;
    elem.innerHTML = progress;
  });
  
  </script>
</body>
</html>
